<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.90f36ede81a6ff33a77d.css">html{font-size:100}body{margin:0 0 0 calc(100vw - 100%);color:#eee;line-height:1.625;font-size:1rem;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body,h1,h2,h3,h4,h5,h6{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif}h1,h2,h3,h4,h5,h6{font-weight:600}h1{font-size:2.5rem;line-height:3.25rem;margin-top:6.5rem;margin-bottom:1.625rem}h2{font-size:1.6875rem;line-height:2.4375rem}h2,h3{margin-top:3.25rem;margin-bottom:.8125rem}h3{font-size:1.375rem;line-height:1.625rem}h4{font-size:1.2rem;margin-top:2.4375rem}h4,h5{line-height:1.625rem;margin-bottom:.8125rem}h5,h6{font-size:1rem;margin-top:4.0625rem}h6{line-height:1.625rem;margin-bottom:.8125rem}img{max-width:100%;margin:inherit auto}hr,img{border:0;display:block}hr{color:#eee;height:26px;margin:3.25rem auto;background-size:100% 26px;background-image:linear-gradient(180deg,transparent 1px,transparent 11px,#eee 0,#eee 15px,transparent 0,transparent 26px);width:6.25rem}a{text-decoration:none}a,a:active,a:focus,a:hover{color:#d65a31}b,strong{font-weight:600}ul{list-style:square;margin-bottom:1.625rem}ul li{padding:0 .3125rem;margin-bottom:.625rem}p{line-height:1.625rem;margin-bottom:1.625rem}blockquote{padding:0;font-style:italic;text-align:center}figure{display:block;width:100%;height:auto}figcaption{line-height:1.21875rem;margin-top:.40625rem;color:#eee;font-size:.875rem;font-style:italic;margin-bottom:0;text-align:center}.anchor{margin-left:-1.875rem!important;padding-right:.875rem!important}@media screen and (min-width:685px){figure.float-left,figure.float-right{max-width:19.375rem;padding:0 1.625rem}.float-right{float:right}.float-left{float:left}}html{background-color:#222831}code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}.Author-module--author__photo--36xCH{display:inline-block;margin-bottom:0;border-radius:50%;background-clip:padding-box}.Author-module--author__title--2CaTb{font-size:1.125rem;font-weight:600;line-height:1.82813rem;margin:.8125rem 0}.Author-module--author__title-link--Yrism,.Author-module--author__title-link--Yrism:focus,.Author-module--author__title-link--Yrism:hover{color:#eee}.Author-module--author__subtitle--cAaEB{color:#fff;line-height:1.625rem;margin-bottom:1.625rem}.Icon-module--icon--Gpyvw{display:inline-block;width:1em;height:1em;stroke-width:0;stroke:currentColor;fill:currentColor;font-style:normal;font-weight:400;speak:none;margin-right:.2em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.Contacts-module--contacts--1rGd1{margin-bottom:1.625rem}.Contacts-module--contacts__list--3OgdW{display:flex;flex-flow:row wrap;flex-grow:0;flex-shrink:0;list-style:none;padding:0;margin:.625rem -.1875rem;width:8.75rem}.Contacts-module--contacts__list-item--16p9q{padding:0;margin:.25rem;display:flex;align-content:center;align-items:center;justify-content:center;height:35px;width:2.1875rem;line-height:2.1875rem;border-radius:50%;text-align:center;border:1px solid #fff;background-color:#393e46}.Contacts-module--contacts__list-item-link--2MIDn{border:0;display:flex;color:#eee}.Contacts-module--contacts__list-item-link--2MIDn:focus,.Contacts-module--contacts__list-item-link--2MIDn:hover{color:#d65a31}.Copyright-module--copyright--1ariN{color:#fff;font-size:.875rem}.Menu-module--menu--Efbin{margin-bottom:1.625rem}.Menu-module--menu__list--31Zeo{list-style:none;padding:0;margin:0}.Menu-module--menu__list-item--1lJ6B{padding:0;margin:.625rem 0}.Menu-module--menu__list-item-link--10Ush{font-size:1rem;color:#eee;font-weight:400;border:0;padding:.1875rem;margin:-.1875rem}.Menu-module--menu__list-item-link--10Ush:focus,.Menu-module--menu__list-item-link--10Ush:hover{text-decoration:none;background-color:#d65a31;color:#222831}.Menu-module--menu__list-item-link--active--2CbUO{color:#eee;border-bottom:1px solid #eee}.Sidebar-module--sidebar--X4z2p{width:100%}.Sidebar-module--sidebar__inner--Jdc5s{position:relative;padding:1.5625rem 1.25rem 0}@media screen and (min-width:685px){.Sidebar-module--sidebar--X4z2p{width:calc(41.625% - 1.09375rem)}.Sidebar-module--sidebar--X4z2p:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Sidebar-module--sidebar--X4z2p:last-child{margin-right:0}.Sidebar-module--sidebar--X4z2p:nth-child(12n){margin-right:0;float:right}.Sidebar-module--sidebar--X4z2p:nth-child(12n+1){clear:both}.Sidebar-module--sidebar__inner--Jdc5s{padding:1.875rem 1.25rem 0}.Sidebar-module--sidebar__inner--Jdc5s:after{background:#fff;background:-webkit-gradient(linear,left top,left bottom,from(#fff),color-stop(48%,#fff),to(#fff));background:linear-gradient(180deg,#fff 0,#fff 48%,#fff);position:absolute;content:"";width:.0625rem;height:540px;top:30px;right:-10px;bottom:0}}@media screen and (min-width:960px){.Sidebar-module--sidebar--X4z2p{width:calc(33.3% - 1.25rem)}.Sidebar-module--sidebar--X4z2p:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Sidebar-module--sidebar--X4z2p:last-child{margin-right:0}.Sidebar-module--sidebar--X4z2p:nth-child(3n){margin-right:0;float:right}.Sidebar-module--sidebar--X4z2p:nth-child(3n+1){clear:both}.Sidebar-module--sidebar__inner--Jdc5s{padding:2.5rem}}.Layout-module--layout--3Pyz6{max-width:66.875rem;margin-left:auto;margin-right:auto;background-color:#222831}.Layout-module--layout--3Pyz6:before{content:"";display:table}.Layout-module--layout--3Pyz6:after{content:"";display:table;clear:both}.Feed-module--feed__item--2D5rE{margin-bottom:2.03125rem;background-color:#393e46;padding:.625rem}.Feed-module--feed__item--2D5rE:last-child{margin-bottom:.8125rem}.Feed-module--feed__item-title--3nigr{font-size:1.6875rem;line-height:2.4375rem;margin-top:0;margin-bottom:.8125rem}.Feed-module--feed__item-title-link--iFMRs{color:#eee}.Feed-module--feed__item-title-link--iFMRs:focus,.Feed-module--feed__item-title-link--iFMRs:hover{color:#eee;border-bottom:1px solid #eee}.Feed-module--feed__item-description--1uO8e{font-size:1rem;line-height:1.625rem;margin-bottom:1.21875rem}.Feed-module--feed__item-meta-time--3t1fg{font-size:.875rem;color:#eee;font-weight:600;text-transform:uppercase}.Feed-module--feed__item-meta-divider--N-Q0A{margin:0 .3125rem}.Feed-module--feed__item-meta-category-link--23f8F{font-size:.875rem;color:#d65a31;font-weight:600;text-transform:uppercase}.Feed-module--feed__item-meta-category-link--23f8F:focus,.Feed-module--feed__item-meta-category-link--23f8F:hover{color:#d65a31}.Feed-module--feed__item-readmore--1u6bI{font-size:1rem;color:#d65a31}.Feed-module--feed__item-readmore--1u6bI:focus,.Feed-module--feed__item-readmore--1u6bI:hover{color:#d65a31;border-bottom:1px solid #d65a31}.Page-module--page--2nMky{margin-bottom:3.25rem}.Page-module--page__inner--2M_vz{padding:1.5625rem .9375rem}.Page-module--page__title--GPD8L{font-size:2.5rem;font-weight:600;line-height:3.25rem;margin-top:0;margin-bottom:2.35625rem}.Page-module--page__body--Ic6i6{font-size:1rem;line-height:1.625rem;margin:0 0 1.625rem}@media screen and (min-width:685px){.Page-module--page--2nMky{width:calc(58.275% - .78125rem)}.Page-module--page--2nMky:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Page-module--page--2nMky:last-child{margin-right:0}.Page-module--page--2nMky:nth-child(12n){margin-right:0;float:right}.Page-module--page--2nMky:nth-child(12n+1){clear:both}.Page-module--page__inner--2M_vz{padding:1.875rem 1.25rem}}@media screen and (min-width:960px){.Page-module--page--2nMky{width:calc(66.6% - .625rem)}.Page-module--page--2nMky:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Page-module--page--2nMky:last-child{margin-right:0}.Page-module--page--2nMky:nth-child(3n){margin-right:0;float:right}.Page-module--page--2nMky:nth-child(3n+1){clear:both}.Page-module--page__inner--2M_vz{padding:2.5rem 2.1875rem}}.Pagination-module--pagination--2H3nO{margin-top:3.25rem;display:flex}.Pagination-module--pagination__prev--bet5s{width:50%;text-align:left}.Pagination-module--pagination__prev-link--1Nzs6{color:#d65a31;font-size:1.625rem;font-weight:700}.Pagination-module--pagination__prev-link--1Nzs6:focus,.Pagination-module--pagination__prev-link--1Nzs6:hover{color:#d65a31}.Pagination-module--pagination__prev-link--disable--Yklx9{pointer-events:none;color:#fff}.Pagination-module--pagination__next--3hFiN{width:50%;text-align:right}.Pagination-module--pagination__next-link--3FUtA{color:#d65a31;font-size:1.625rem;font-weight:700}.Pagination-module--pagination__next-link--3FUtA:focus,.Pagination-module--pagination__next-link--3FUtA:hover{color:#d65a31}.Pagination-module--pagination__next-link--disable--30UwZ{pointer-events:none;color:#fff}.Author-module--author--2Yefr{border-top:1px solid #fff;max-width:58.75rem;padding-top:1.25rem;line-height:1.625rem;margin-top:1.625rem;margin-bottom:3.25rem}.Author-module--author__bio-twitter--n-O9n{padding:.1875rem;margin:-.1875rem}.Author-module--author__bio-twitter--n-O9n:focus,.Author-module--author__bio-twitter--n-O9n:hover{text-decoration:none;background-color:#d65a31;color:#222831}@media screen and (min-width:685px){.Author-module--author--2Yefr{margin-left:auto;margin-right:auto}}.Content-module--content--3p512{max-width:77.8125rem;padding:0 .9375rem;margin:0 auto}.Content-module--content__title--2BDW9{font-size:2rem;max-width:58.75rem;font-weight:600;text-align:center;line-height:2.68125rem;margin:1.625rem auto 0}.Content-module--content__body--2TrQ- figure{margin-bottom:1.625rem}.Content-module--content__body--2TrQ- figure blockquote{font-style:italic;text-align:center;margin-top:0;padding:1.625rem 0}.Content-module--content__body--2TrQ- figure blockquote p{max-width:58.75rem;font-size:1.6817rem;margin-top:0;margin-bottom:1.625rem;line-height:2.4375rem}.Content-module--content__body--2TrQ- a{text-decoration:none;padding:.1875rem;margin:-.1875rem}.Content-module--content__body--2TrQ- a:focus,.Content-module--content__body--2TrQ- a:hover{text-decoration:none;background-color:#d65a31;color:#222831}.Content-module--content__body--2TrQ- *{max-width:58.75rem;margin-left:auto;margin-right:auto}.Content-module--content__body--2TrQ- img{max-width:100%}@media screen and (min-width:960px){.Content-module--content--3p512{padding:0}.Content-module--content__title--2BDW9{font-size:3rem;line-height:3.65625rem;margin-top:3.65625rem;margin-bottom:2.4375rem}.Content-module--content__body--2TrQ-,.Content-module--content__body--2TrQ- p{font-size:1.125rem;line-height:1.82813rem;margin-bottom:1.82813rem}}.Meta-module--meta__date--29eD7{font-style:italic}.Tags-module--tags--1L_ct{margin-bottom:.8125rem}.Tags-module--tags__list--91FqN{list-style:none;margin:0 -.625rem;padding:0}.Tags-module--tags__list-item--1M30P{display:inline-block;margin:.625rem .3125rem}.Tags-module--tags__list-item-link--3SL_8{display:inline-block;height:35px;padding:0 1.5rem;line-height:2.1875rem;border:1px solid #fff;text-decoration:none;border-radius:.1875rem;color:#eee;background-color:#393e46}.Tags-module--tags__list-item-link--3SL_8:focus,.Tags-module--tags__list-item-link--3SL_8:hover{color:#222831;background-color:#d65a31}.Post-module--post__comments--25y6I,.Post-module--post__footer--3WzWU{max-width:58.75rem;margin:0 auto;padding:0 .9375rem}.Post-module--post__home-button--16Kl0{display:block;max-width:5.625rem;height:35px;padding:0 1.5rem;line-height:2.1875rem;text-align:center;color:#eee;border:1px solid #fff;border-radius:.1875rem;font-size:1rem;font-weight:400;margin-left:auto;margin-right:auto;margin-top:1.625rem}.Post-module--post__home-button--16Kl0:focus,.Post-module--post__home-button--16Kl0:hover{text-decoration:none;background-color:#d65a31;color:#222831}@media screen and (min-width:960px){.Post-module--post__comments--25y6I,.Post-module--post__footer--3WzWU{padding:0}.Post-module--post__home-button--16Kl0{position:fixed;max-width:auto;margin:0;top:30px;left:30px}}</style><meta name="generator" content="Gatsby 2.14.2"/><link rel="alternate" type="application/rss+xml" title="Adrián Gonzalo | Full Stack Developer" href="/rss.xml"/><style type="text/css">.gatsby-resp-image-image{width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;color:transparent;}</style><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-61148321-4"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-61148321-4', {"send_page_view":false});
      }
      </script><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="shortcut icon" href="/icons/icon-48x48.png?v=a85da476d8d02770bbba285017e565ef"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#F7A046"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=a85da476d8d02770bbba285017e565ef"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=a85da476d8d02770bbba285017e565ef"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=a85da476d8d02770bbba285017e565ef"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=a85da476d8d02770bbba285017e565ef"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=a85da476d8d02770bbba285017e565ef"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=a85da476d8d02770bbba285017e565ef"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=a85da476d8d02770bbba285017e565ef"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=a85da476d8d02770bbba285017e565ef"/><title data-react-helmet="true">Having fun in the eternal fight against the ads - Adrián Gonzalo | Full Stack Developer</title><meta data-react-helmet="true" name="description" content="I find a new anti adblock warning on my usual news webpage and figure how to remove the warning by using javascript"/><meta data-react-helmet="true" property="og:site_name" content="Having fun in the eternal fight against the ads - Adrián Gonzalo | Full Stack Developer"/><meta data-react-helmet="true" property="og:image" content="https://agm-dev.ninja/media/gary-clark-jr-2019.jpg"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:title" content="Having fun in the eternal fight against the ads - Adrián Gonzalo | Full Stack Developer"/><meta data-react-helmet="true" name="twitter:description" content="I find a new anti adblock warning on my usual news webpage and figure how to remove the warning by using javascript"/><meta data-react-helmet="true" name="twitter:image" content="https://agm-dev.ninja/media/gary-clark-jr-2019.jpg"/><link as="script" rel="preload" href="/app-8c199c6f503771432dd9.js"/><link as="script" rel="preload" href="/component---src-templates-post-template-js-9103610f79127be3eb61.js"/><link as="script" rel="preload" href="/styles-19d59e777d7c987e14bd.js"/><link as="script" rel="preload" href="/commons-443960481973a4a5d977.js"/><link as="script" rel="preload" href="/webpack-runtime-8ebc1fc9119e264e7081.js"/><link as="fetch" rel="preload" href="/page-data/posts/having-fun-in-the-eternal-fight-against-the-ads/page-data.json" crossorigin="anonymous"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="Layout-module--layout--3Pyz6"><div><a class="Post-module--post__home-button--16Kl0" href="/">All Articles</a><div><div class="Content-module--content--3p512"><h1 class="Content-module--content__title--2BDW9">Having fun in the eternal fight against the ads</h1><div class="Content-module--content__body--2TrQ-"><p>I usually read news on <a href="https://elpais.com" target="_blank" rel="nofollow noopener noreferrer">elpais.com</a>. I reach them through Twitter links because it’s one of the news account I follow.</p>
<p>Some time ago they added a big anti adblock banner in the middle of the page that was displayed every time you loaded a page if you had adblock installed and enabled. At that time I didn’t know the adblock feature that includes an option in the contextual menu to block an element on the page, so I created <a href="https://chrome.google.com/webstore/detail/agm-chrome-extension/bpjmkofdilcfhaafpkokkanpppcblddf" target="_blank" rel="nofollow noopener noreferrer">my own and personal chrome extension</a> and added a script that is executed only on <code class="language-text">elpais.com</code> domains, and disables the banner.</p>
<p>The code removes the banner element and enables scrolling again:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> overlay <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.fc-ab-root'</span><span class="token punctuation">)</span>
overlay<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>overlay<span class="token punctuation">)</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>overflow <span class="token operator">=</span> <span class="token string">'scroll'</span></code></pre></div>
<p>It was simple because the class was always the same.</p>
<p>But today I visited their page, following some random link on Twitter, and this is what I found…</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 691px;"
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/aac3992899595d7070971cc0397d187a/097e8/anti-adblock-01.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 35.74529667149059%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAAB24MW4P/EABcQAAMBAAAAAAAAAAAAAAAAAAAQISL/2gAIAQEAAQUCppf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAYEAADAQEAAAAAAAAAAAAAAAAAASERgf/aAAgBAQABPyFvcOCn/9oADAMBAAIAAwAAABB8P//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/EIf/xAAWEQADAAAAAAAAAAAAAAAAAAAAARH/2gAIAQIBAT8QrKz/xAAYEAEBAQEBAAAAAAAAAAAAAAABABEhYf/aAAgBAQABPxBjGZ7DA46u3//Z'); background-size: cover; display: block;"
  ></span>
  <picture>
        <source
          srcset="/static/aac3992899595d7070971cc0397d187a/01472/anti-adblock-01.webp 240w,
/static/aac3992899595d7070971cc0397d187a/222bd/anti-adblock-01.webp 480w,
/static/aac3992899595d7070971cc0397d187a/ca360/anti-adblock-01.webp 691w"
          sizes="(max-width: 691px) 100vw, 691px"
          type="image/webp"
        />
        <source
          srcset="/static/aac3992899595d7070971cc0397d187a/3bc27/anti-adblock-01.jpg 240w,
/static/aac3992899595d7070971cc0397d187a/98431/anti-adblock-01.jpg 480w,
/static/aac3992899595d7070971cc0397d187a/097e8/anti-adblock-01.jpg 691w"
          sizes="(max-width: 691px) 100vw, 691px"
          type="image/jpeg"
        />
        <img
          class="gatsby-resp-image-image"
          src="/static/aac3992899595d7070971cc0397d187a/097e8/anti-adblock-01.jpg"
          alt="Anti adblock elpais.com"
          title="Anti adblock elpais.com"
          loading="lazy"
        />
      </picture>
  </a>
    </span></p>
<p>Yeeep… there we go again…</p>
<p>But it doesn’t matter. I always enjoy the opportunity to open Chrome Dev Tools and play with Javascript and the DOM.</p>
<p>When I inspect the element I find this time it uses a random class name.</p>
<p>If we check the classes of the div elements in the page we notice that there are a lot of divs at the end of the page with random class names.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// code to get and print all classes used by div elements in the page</span>
<span class="token keyword">let</span> classes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">el</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  classes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>classes<span class="token punctuation">,</span> <span class="token operator">...</span>el<span class="token punctuation">.</span>classList<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">table</span><span class="token punctuation">(</span>classes<span class="token punctuation">)</span></code></pre></div>
<p>The weak point here is that all random generated classes have the same length… 12 characters length.</p>
<p>So we can remove duplicates and filter our <code class="language-text">classes</code> content to get the random classes used:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// removes the duplicates and takes only the 12 length class names</span>
<span class="token keyword">const</span> suspiciousClasses <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>new <span class="token class-name">Set</span><span class="token punctuation">(</span>classes<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">i</span> <span class="token operator">=></span> i<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">12</span><span class="token punctuation">)</span></code></pre></div>
<p>This reduces the 220 count to around 30. But includes some legitim class names that match our “twelve characters length” rule. We can remove them if we notice that the random classes don’t use whitespaces or underscores.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// removes 12 characters length class names with whitespaces or underscores</span>
<span class="token keyword">const</span> randomClasses <span class="token operator">=</span> suspiciousClasses<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">i</span> <span class="token operator">=></span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token regex">/\s|_/</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div>
<p>And now we can just find the elements that use those classes and remove them:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// remove all suspicious elements</span>
suspiciousClasses<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">className</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> elements <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">div.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>className<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    elements<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">el</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'removing suspicious element...'</span><span class="token punctuation">)</span>
      el<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>I wrap the code into a <code class="language-text">try/catch</code> block because some random generated classes will produce a javascript error (<code class="language-text">div.123random</code>), because it seems querySelectors can’t start with a number. We could write the sentence like this <code class="language-text">document.querySelectorAll(&quot;[class=&#39;123random&#39;]&quot;)</code> and it would work, but I prefer the <code class="language-text">try/catch</code> approach.</p>
<p>So, I have grouped all this logic into a function and added it to the current flow of my <a href="https://chrome.google.com/webstore/detail/agm-chrome-extension/bpjmkofdilcfhaafpkokkanpppcblddf" target="_blank" rel="nofollow noopener noreferrer">agm-chrome-extension</a>:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">removeSuspiciousElements</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">isSuspicious</span> <span class="token operator">=</span> <span class="token parameter">className</span> <span class="token operator">=></span> className<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">12</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token regex">/\s|_/</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span>

  <span class="token keyword">let</span> rawClasses <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">el</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    rawClasses <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>rawClasses<span class="token punctuation">,</span> <span class="token operator">...</span>el<span class="token punctuation">.</span>classList<span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// remove duplicates</span>
  <span class="token keyword">const</span> uniqueClasses <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>new <span class="token class-name">Set</span><span class="token punctuation">(</span>rawClasses<span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> suspiciousClasses <span class="token operator">=</span> uniqueClasses<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>isSuspicious<span class="token punctuation">)</span>

  <span class="token comment">// remove all suspicious elements</span>
  suspiciousClasses<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">className</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> elements <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">div.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>className<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
      elements<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">el</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'removing suspicious element...'</span><span class="token punctuation">)</span>
        el<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>And it just works :D</p>
<p>So now I can continue reading news without disturbing and useless warnings :)</p>
<h2 id="what-if-they-randomize-the-length-of-the-generated-classes"><a href="#what-if-they-randomize-the-length-of-the-generated-classes" aria-label="what if they randomize the length of the generated classes permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What if they randomize the length of the generated classes?</h2>
<p>I have two ideas to solve this problem, but I would have to explore it to check if they are viable. I’ll do it when they evolve their banners in this direction.</p>
<ol>
<li>Download and parse the stylesheets. The random generated classes won’t be there, so we could get all document classes and discard all classes present on the stylesheets.</li>
<li>Use some dictionary or apply some kind of machine learning to identify random strings, then process the classes to find the random ones.</li>
</ol></div></div></div><div class="Post-module--post__footer--3WzWU"><div><p class="Meta-module--meta__date--29eD7">Published <!-- -->1 Oct 2019</p></div><div class="Tags-module--tags--1L_ct"><ul class="Tags-module--tags__list--91FqN"><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/tag/programming/">programming</a></li><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/tag/javascript/">javascript</a></li><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/tag/dom/">DOM</a></li><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/tag/dom-manipulation/">DOM manipulation</a></li><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/tag/adblocker/">adblocker</a></li><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/tag/elpais/">elpais</a></li><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/tag/chrome-extension/">chrome extension</a></li></ul></div><div class="Author-module--author--2Yefr"><p>Javascript Full Stack Developer<br/><a class="Author-module--author__bio-twitter--n-O9n" href="https://www.twitter.com/agm_dev" rel="noopener noreferrer" target="_blank"><strong>Adrián Gonzalo</strong> on Twitter</a></p></div></div><div class="Post-module--post__comments--25y6I"></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/having-fun-in-the-eternal-fight-against-the-ads/";window.webpackCompilationHash="772700f46e23d6ee1645";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-8c199c6f503771432dd9.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-1370483467103c8110db.js"],"component---src-templates-not-found-template-js":["/component---src-templates-not-found-template-js-65050714465ee385f34f.js"],"component---src-templates-tags-list-template-js":["/component---src-templates-tags-list-template-js-81e8a2f01bed1160823d.js"],"component---src-templates-categories-list-template-js":["/component---src-templates-categories-list-template-js-c90aa28dba5818e65fd5.js"],"component---src-templates-page-template-js":["/component---src-templates-page-template-js-7e75f1970491d4901fa2.js"],"component---src-templates-post-template-js":["/component---src-templates-post-template-js-9103610f79127be3eb61.js"],"component---src-templates-tag-template-js":["/component---src-templates-tag-template-js-d1d562a3d3dd7a8e1692.js"],"component---src-templates-category-template-js":["/component---src-templates-category-template-js-a959ad1651e856714deb.js"],"component---src-templates-index-template-js":["/component---src-templates-index-template-js-b92bbd6b7839e3903ca0.js"]};/*]]>*/</script><script src="/webpack-runtime-8ebc1fc9119e264e7081.js" async=""></script><script src="/commons-443960481973a4a5d977.js" async=""></script><script src="/styles-19d59e777d7c987e14bd.js" async=""></script><script src="/component---src-templates-post-template-js-9103610f79127be3eb61.js" async=""></script><script src="/app-8c199c6f503771432dd9.js" async=""></script></body></html>